<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.6.5/css/buttons.dataTables.min.css">    
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.24/css/dataTables.bootstrap5.min.css">

    <link href="/css/dashboard.css" rel="stylesheet" type="text/css">
    <title>Brandium</title>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <nav class="navbar fixed-top  navbar-expand-lg navbar-light bg-tm">
                <p><b>Brandium</b></p>
            </nav>
        </div>
        <div class="content">
            <div class="filter">
                <form action="/dashboard" method="GET" id="filter">
                    <p>Filtros</p>
                    <label class="option-filter-title">Situación de la marca</label>
                    <select class="form-select" name="Situacion">  
                        <option value="null"></option>
                        <% situacion.forEach(function(s) { %>
                            <% if(filter.situacion && filter.situacion == s.situacion_marca) { %>
                                <option selected value=<%= s.situacion_marca %> ><%= s.situacion_marca %></option>
                            <% }else{ %>
                                <option value=<%= s.situacion_marca %>><%= s.situacion_marca %></option>
                            <% } %>
                        <% }); %>
                    </select>
                    <label class="option-filter-title">Número de Clasificación</label>
                    <select class="form-select" name="Clasificacion">
                        <option value="null"></option>
                        <% clasificacion.forEach(function(c) { %>
                            <% if(filter.clasificacion && filter.clasificacion == c.clasificacion_niza) { %>
                                <option selected value=<%= c.clasificacion_niza %>><%= c.clasificacion_niza %></option>
                            <% }else{ %>
                                <option value=<%= c.clasificacion_niza %>><%= c.clasificacion_niza %></option>
                            <% } %>                            
                        <% }); %>
                    </select>
                    <label class="option-filter-title">Número de clase</label>
                    <select class="form-select" name="Clase">
                        <option value="null"></option>
                        <% clase.forEach(function(c) { %>
                            <% if(filter.clase && filter.clase == c.clase_marca) { %>
                                <option selected value=<%= c.clase_marca %>><%= c.clase_marca %></option>
                            <% }else{ %>
                                <option value=<%= c.clase_marca %>><%= c.clase_marca %></option>
                            <% } %>  
                            
                        <% }); %>
                    </select>
                    <label class="option-filter-title">Teléfono</label>
                    <div class="form-check">
                        <% if(filter.telefono && filter.telefono == "on") { %>
                            <input class="form-check-input" type="checkbox" name="Telefono" checked>
                        <% }else{ %>
                            <input class="form-check-input" type="checkbox" name="Telefono">
                        <% } %> 
                        <label class="form-check-label">
                        Disponible
                        </label>
                    </div>
                    <label class="option-filter-title">Correo</label>
                    <div class="form-check">
                        <% if(filter.correo && filter.correo == "on") { %>
                            <input class="form-check-input" type="checkbox" name="Correo" checked>
                        <% }else{ %>
                            <input class="form-check-input" type="checkbox" name="Correo">
                        <% } %> 
                        <label class="form-check-label">
                        Disponible
                        </label>
                    </div>
                    <button type="submit" class="ds-button">Filtrar</button>
                </form>
            </div>
            <table class="table" id="marcas" class="table table-striped">
                <thead>
                    <tr>
                        <th scope="col" colspan="12">Marca</th>
                        <th scope="col" colspan="7">Solicitante</th>
                        <th scope="col" colspan="7">Representante</th>
                    </tr>
                    <tr>
                        <th scope="col">Número de solicitud</th>
                        <th scope="col">Número de registro</th>
                        <th scope="col">Nombre de la marca</th>
                        <th scope="col">Clasificación</th>
                        <th scope="col">Tipo de DPI</th>
                        <th scope="col">Tipo de marca</th>
                        <th scope="col">Clase</th>
                        <th scope="col">Productos y/o servicios</th>
                        <th scope="col">Situación</th>
                        <th scope="col">Fecha de solicitud</th>
                        <th scope="col">Fecha de registro</th>
                        <th scope="col">Fecha de vencimiento</th>
                        <th scope="col">Nombre</th>
                        <th scope="col">Teléfono</th>
                        <th scope="col">Correo electrónico</th>
                        <th scope="col">País</th>
                        <th scope="col">Municipio</th>
                        <th scope="col">Dirección</th>
                        <th scope="col">Código postal</th>
                        <th scope="col">Nombre</th>
                        <th scope="col">Teléfono</th>
                        <th scope="col">Correo electrónico</th>
                        <th scope="col">País</th>
                        <th scope="col">Municipio</th>
                        <th scope="col">Dirección</th>
                        <th scope="col">Código postal</th>
                    </tr>
                </thead>
                <tbody>
                  <% marcas.forEach(function(marca) { %>
                    <tr>
                      <th scope="row"><%= marca.no_solicitud %></th>
                      <td><%= marca.no_registro %></td>
                      <td><%= marca.nombre_marca %></td>
                      <td><%= marca.clasificacion_niza %></td>
                      <td><%= marca.tipo_dpi %></td>
                      <td><%= marca.tipo_marca %></td>
                      <td><%= marca.clase_marca %></td>
                      <td><%= marca.producto_servicio %></td>
                      <td><%= marca.situacion_marca %></td>
                      <td><%= marca.fecha_solicitud %></td>
                      <td><%= marca.fecha_registro %></td>
                      <td><%= marca.fecha_vencimiento %></td>
                      <td><%= marca.nombre_solicitante %></td>
                      <td><%= marca.telefono_solicitante %></td>
                      <td><%= marca.correo_solicitante %></td>
                      <td><%= marca.pais_solicitante %></td>
                      <td><%= marca.municipio_solicitante %></td>
                      <td><%= marca.direccion_solicitante %></td>
                      <td><%= marca.cp_solicitante %></td>
                      <td><%= marca.nombre_representante %></td>
                      <td><%= marca.telefono_representante %></td>
                      <td><%= marca.correo_representante %></td>
                      <td><%= marca.pais_representante %></td>
                      <td><%= marca.ciudad_representante %></td>
                      <td><%= marca.direccion_representante %></td>
                      <td><%= marca.cp_representante %></td>
                    </tr>
                  <% }); %>
                </tbody>
              </table>
        </div>
        <div class="footer">
            <p>pie de página</p>
        </div>
    </div>

    <!-- jquery y bootstrap -->
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>   
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>

    <!-- datatables con bootstrap -->
    <script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.24/js/dataTables.bootstrap5.min.js"></script>

    <!-- Para usar los botones -->
    <script src="https://cdn.datatables.net/buttons/1.6.5/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.html5.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>

    <script>
        $(document).ready( function () {
        $('#marcas').DataTable({
            "responsive": true,
            "paging": true,
            "lengthChange": true,
            "lengthMenu": [ [50, 100, 250, 500, -1], [50, 100, 250, 500, "All"] ],
            "pageLength": 50,
            searching: false,
            ordering:  false,
            "language": {
                "info":           "Mostrando _START_ a _END_ de _TOTAL_ registros",
                "infoEmpty":      "Mostrando 0 a 0 de 0 registros",
                "lengthMenu":     "Número de registros _MENU_",
                "paginate": {
                    "first":      "Inicio",
                    "last":       "Fin",
                    "next":       "Siguiente",
                    "previous":   "Anterior",
                    className: 'bg-secondary'
                }
            },
            columnDefs: [
                {
                    targets: [0, 1, 2, 4, 5, 9, 10, 11, 18, 25],
                    className: 'text-nowrap'
                }
            ],
            dom: 'Bliptip',
            buttons:[
            {
                extend: "excel",
                text:'<span class="prueba">Exportar a Excel</span>',
                className:'ds-button',
            }
            ]
        });
        } );
    </script>

    <script  type="text/javascript" src="/js/dashboard.js"></script>
</body>
</html>